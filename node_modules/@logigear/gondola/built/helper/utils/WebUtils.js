"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getScrollOffset=exports.getDeviationHeight=exports.getWebdriverWindowSize=exports.getRealWindowSize=exports.getBrowserInfo=exports._assertOverlappedLocator=exports.waitForClickable=exports.getElementId=exports.findFirstElement=exports.selectByIndex=exports.scrollIntoView=void 0;const errors=__importStar(require("../../errors")),message_1=require("../../message"),util_1=require("../../util"),ElementNotFound=require("codeceptjs/lib/helper/errors/ElementNotFound");async function scrollIntoView(e,t,r){const i=await findFirstElement(e,t);await i.scrollIntoView(r)}async function selectByIndex(e,t,r){if(r<0)throw new errors.NegativeNumberError;const i=await findFirstElement(e,t),o=(await i.getTagName()).toLowerCase(),n=getElementId(i);let a="option";"ul"===o&&(a="li");const l=e.browser,s=await l.findElementsFromElement(n,"css selector",a);if(0===s.length)throw new errors.EmptySelectControl;if(s.length-1<r)throw new errors.InvalidSelectOptionIndex(r,s.length);const c=getElementId(s[r]),d=await l.isElementDisplayed(c),w=await l.isElementEnabled(c);if(!1===d||!1===w)throw new errors.GError(errors.GErrorKey.ElementNotEnabledOrDisplayed,t);if("select"!==o){if("ul"===o)return await l.elementClick(c);throw new errors.InvalidSelectOptionStrategy(o)}await i.selectByIndex(r)}async function findFirstElement(e,t,r=!0){if(!e)return;const i=await e._locate(t,r);if(!i||0===i.length)throw new ElementNotFound(t);return i[0]}function getElementId(e){return e?e["element-6066-11e4-a52e-4f735466cecf"]?e["element-6066-11e4-a52e-4f735466cecf"]:e.ELEMENT?e.ELEMENT:null:null}async function waitForClickable(e,t,r){const i=await e._locate(t,!0);if(!i.length)throw new errors.ElementNotFoundError(util_1.getLocatorString(t));const o=i[0],n=message_1.format(message_1.localize(errors.GErrorKey.TimeoutForClickable),t,r);await o.waitForClickable({timeout:1e3*r,timeoutMsg:n})}async function _assertOverlappedLocator(e,t){const r=await e._locate(t,!0);if(!r.length)throw new errors.ElementNotFoundError(util_1.getLocatorString(t));const i=r[0],o=await i.isClickable(),n=await i.isDisplayed();if(!o||!n)throw new errors.GError(errors.GErrorKey.ElementNotEnabledOrDisplayed,t)}function getBrowserInfo(e){if(null==e?void 0:e.capabilities)return{name:e.capabilities.browserName,version:e.capabilities.browserVersion}}async function getRealWindowSize(e){return await e.execute(()=>({width:innerWidth,height:innerHeight}))}async function getWebdriverWindowSize(e){return await e.getWindowRect()}async function getDeviationHeight(e){const t=await getRealWindowSize(e),r=await getWebdriverWindowSize(e);return t&&r&&t.height&&r.height?Math.abs(t.height-r.height):0}async function getScrollOffset(e){return e.execute(()=>({scrollX:window.pageXOffset,scrollY:window.pageYOffset}))}exports.scrollIntoView=scrollIntoView,exports.selectByIndex=selectByIndex,exports.findFirstElement=findFirstElement,exports.getElementId=getElementId,exports.waitForClickable=waitForClickable,exports._assertOverlappedLocator=_assertOverlappedLocator,exports.getBrowserInfo=getBrowserInfo,exports.getRealWindowSize=getRealWindowSize,exports.getWebdriverWindowSize=getWebdriverWindowSize,exports.getDeviationHeight=getDeviationHeight,exports.getScrollOffset=getScrollOffset;
//# sourceMappingURL=../../../debug/helper/utils/WebUtils.js.map
